# 4장 : 역할, 책임, 협력

# 책임

객체의 공용 인터페이스를 구성한다

- 객체의 외부에 제공해 줄 수 있는 정보
- 외부에 제공해 줄 수 있는 서비스

책임을 결정한 후 실제로 협력을 정제하면서 메세지로 변환시

여러 메세지로 분할

# 역할

역할은 협력 내에서 다른 객체로 대체할 수 있는 추상적인 협력자

다른 객체는 동일한 메세지를 이해할 수 있는 객체로 한정

### 구체적인 객체를 추상적인 역할로 대체함으로 협력을 단순화가능

- 동일한 구조의 협력을 다양한 문맥에서 재사용 가능

객체는 역할에 주어진 책임 이외에 다른 책임도 수행 가능

- 모자 장수는 증인의 역할뿐만 아니라 모자를 판매해야함

### 객체의 타입과 역할사이에는 일반화/특수화 관계 성립

객체는 역할이 암시하는 책임보다 더 많은 책임가짐

- 역할 : 일반화
- 타입 : 특수화 - 구체적 개념 의미

### 역할의 대체 가능성은 행위 호환성 의미 → 동일한 책임 수행 의미

# 객체지향 선입견

1. 데이터를 저장하기 위해 객체가 존재한다
    1. 객체 존재 이유는 행위를 수행하며 협력에 참여하기 위한 것
2. 객체지향이 클래스와 클래스간의 관계를 표현하는 시스템의 정작인 측면에 중점을 둠
    1. 중요한 것은 협력에 참여하는 동적인 객체
    

# 객체지향 설계

1. 깔끔한 협력 설계
2. 객체들이 주고 받을 요청 및 응답 흐름 결정
3. 이 흐름은 객체의 책임이 됨
4. 책임은 객체가 외부에 제공하게 될 행동이 됨
5. 필요한 데이터 고민

다시 정리하면

1. 필요한 책임 고안
2. 책임 수행하기위해 필요한 객체 선택
3. 객체에게 책임을 할당
4. 객체들이 외부에 제공할 행동 정의
5. 필요한 데이터 정의
6. 클래스 개발

# 책임 주도 설계

## 객체지향 시스템의 목적

```
사용자의 요구를 만족시킬 수 있는 기능을 제공하는 동시에
이해하기 쉽고 단순하고 유연한 상호작용을 제공하는 객체들의 공동체 구축
```

### 객체지향 설계란

기능 구현을 위한 협력관계를 고안하고,

협력에 필요한 역할과 책임을 식별한 후 이를 수행할 수 있는 적절한 객체를 식별해 나가는 과정

## 설계 순서

1. 제공해야 하는 기능- 시스템 책임을 파악
2. 작은 책임으로 분할
3. 책임을 수행할 수 있는 객제 또는 역할(추상화)을 찾아 책임을 할당
4. 다른 객체의 도움이 필요한 경우 이를 책임질 객체 또는 역할 찾음
5. 해당 객체 또는 역할에게 책임 할당하여 협력하도록 한다

# 디자인 패턴

- 디자인 패턴은 책임-주도 설계의 결과를 표현한다
- 모범이 되는 설계이다.
- 반복적으로 발생하는 문제와 그에 대한 해법의 쌍으로 구성됨

### 유사한 상황에서 반복적으로 적용할 수 있는 책임-주도 설계의 결과물

- 공통으로 사용할수 있는 역할, 책임 ,협력의 템플릿

# 테스트 주도 개발

```
책임을 수행할 객체 또는 클라이언트가 기대하는 객체의 역할이 메세지를 수신할 때
어떤 결과를 반환하고 그 과정에서 어떤 객체와 협력할 것인지에 대한 기대를 코드로 작성하는 것

책임 주도 설계의 기본 개념과 원칙, 프랙티스, 패턴을 종합적으로 이해하고
좋은 설계에 대한 감각과 경험을 길러야만 적용할 수 있는 설계기법이다

역할, 책임, 협력에 집중하고 객체지향의 원칙을 적용하려는 깊이 있는 고민과 노력을
통해서만 테스트 주도 개발의 혜텍을 누릴 수 있다.
```

객체가 이미 존재한다고 가정하고 객체에게 어떤 메세지를 전송할 것인지에 관해 먼저 생각해야함