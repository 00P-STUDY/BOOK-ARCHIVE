# 역할, 책임, 협력
> 우리 모두를 합친 것보다 더 현명한 사람은 없다.

## 협력
### 요청하고 응답하며 협려갛는 사람들
- 협력은 한 사람이 다른 사람에게 도움을 요청할 때 시작됨.

### 재판 속의 협력
- 객체지향의 시점에서 협력 관계를 살펴보자.

1. 누군가가 왕에게 재판을 <b>요청</b>함으로써 재판이 시작
2. 왕이 하얀 토끼에게 증인을 부를 것을 <b>요청</b>
3. 왕의 요청을 받은 토끼는 모자 장수에게 증인석으로 입장할 것을 <b>요청</b>한다.
4. 모자 장수는 증인석에 입장함으로써 토끼의 요청에 <b>응답</b>한다.
5. 모자 장수의 입장은 왕이 토끼에게 요청했던 증인 호출에 대한 <b>응답</b>이기도 하다.
6. 이제 왕은 모자장수에게 증언할 것을 <b>요청</b>한다.
7. 모자 장수는 자신이 알고 있는 내용을 증언함으로써 왕의 요청에 <b>응답</b>한다.

- 등장인물들이 특정한 요청을 받아들일 수 있는 이유는 그 요청에 대해 적절한 방식으로 응답하는 데 <b>필요한 지식과 행동 방식</b>을 갖고 있기 때문.
- 요청과 응답은 협력에 참여하는 객체가 수행할 책임(행동)을 정의한다.

## 책임
> 객체지향 개발에서 가장 중요한 능력은, 책임을 능숙하게 객체에게 할당하는 것
- 어떤 객체가 어떤 요청에 대해 대답해줄 수 있거나, 적절한 행동을 할 의무가 있는 경우 해당 객체가 <b>책임</b>을 지닌다고 한다.

### 책임의 분류
- 협력에 참여하는 객체들은 목표를 달성하는 데 필요한 책임을 수행
- 책임은 객체에 의해 정의되는 응집도 있는 행위의 집합
- 또한, 객체가 알아야할 정보와 수행할 수 있는 행위에 대해 개략적으로 서술한 문장
  - 즉, 무엇을 알고 있는지? (knowing)
  - 무엇을 할 수 있는지? (doing)

- 객체의 책임을 이야기할 때는 일반적으로 외부에서 접근 가능한 공용 서비스의 관점에서 이야기한다.
- 즉, 책임은 객체의 외부에 제공해 줄 수 있는 정보(아는 것), 외부에 제공해 줄 수 있는 서비스(하는 것)의 목록.
- 책임은 객체의 <b>공용 인터페이스(public interface)</b>로 구성.

### 책임과 메시지
- 객체가 다른 객체에게 주어진 책임을 수행하도록 요청하는 것을 메시지 전송(message-send)이라고 한다.
- 메시지는 협력을 위해 한 객체가 다른 객체에게 접근할 수 있는 유일한 방법
- 주의 : 책임과 메시지의 수준이 같지는 않다는 점
  - 책임은 객체가 협력에 참여하기 위해 수행해야 하는 행위를 상위 수준에서 개략적으로 서술한 것.

## 역할
### 책임의 집합이 의미하는 것
- 어떤 객체가 수행하는 책임의 집합 => 객체가 협력 안에서 수행하는 역할을 암시

### 역할이 답이다
- 여러 개의 협력이 진행될 때, 각각을 수정하며 다뤄야할까?
- 디테일한 역할에서 추상화한 역할을 이용한다면?
  - 해당 자리는 해당 역할을 수행할 수 있는 어떤 객체라도 협력에 참여할 수 있다는 것!
- 동일한 역할을 수행할 수 있다는 것
  - 협력 내에서 해당 객체들이 **동일한 책임의 집합**을 수행할 수 있다는 점을 의미
  - **동일한 메시지**를 수신할 수 있기 때문에 **동일한 책임을 수행**할 수 있다는 것 것.
- 역할은 객체지향 설계의 **단순성, 유연성, 재사용성**을 뒷받침하는 핵심 개념

### 협력의 추상화
- 역할의 가장 큰 가치 : 하나의 협력 안에 여러 종류의 객체가 참여할 수 있게 함으로써 협력을 추상화할 수 있다는 점
- 어플리케이션의 설계를 이해하고 기억하기 쉬워진다.

### 대체 가능성
- **역할**은 협력 안에서 구체적인 객체로 대체될 수 있는 추상적인 협력자
  - 본질적으로 역할은 다른 객체에 의해 대체 가능함을 의미
  - 대체하기 위해선 **행동이 호환돼야 한다**
- 또한, 객체는 역할에 주어진 책임 이외에 다른 책임을 수행할 수도 있다.
  > 역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미

## 객체의 모양을 결정하는 협력
### 흔한 오류
1. 시스템에 필요한 데이터를 저장하기 위해 객체가 존재?
- 객체가 존재하는 이유는 행위를 수행하며 협력에 참여하기 위함.
  - 제일 중요한 건 **객체의 행동, 책임**이다.

2. 객체지향이 클래스와 클래스 간의 관계를 표현하는 시스템의 정적인 측면에 중점을 둔다는 것
- 중요한 것은 정적인 클래스가 아닌, 협력에 참여하는 동적인 객체
- 클래스는 단지 시스템에 필요한 객체를 표현하고 생성하기 위해 **프로그래밍 언어가 제공하는 구현 메커니즘**
  - 중요한 건, 클래스를 어떻게 구현할 것인가 (X)
  - 객체가 협력 안에서 어떤 책임과 역할을 수행할 것인지를 결정 (O)

### 협력을 따라 흐르는 객체의 책임
- 올바른 객체 설계를 위해선 먼저 견고하고 깔끔한 협력을 설계해야 함.
