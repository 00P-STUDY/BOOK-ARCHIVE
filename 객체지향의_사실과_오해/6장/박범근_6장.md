# 객체 지도
> 안정적인 구조를 따라 역할, 책임, 협력을 구성하자.

## 기능 설계 대 구조 설계
- 훌륭한 구조는 훌륭한 SW를 만들기 위한 필요조건이다.
- 훌륭한 구조는 빠르게 요구사항을 반영할 수 있음
- 요구사항은 계속 변경된다.
  - 변경을 예측한다? (X)
  - 변경을 수용할 수 있는 선택의 여지를 설계에 마련해 놓는다 (O)
- **가장 좋은 방법은 자주 변경되는 기능이 아닌 안정적인 구조를 중심으로 설계하는 것**

### 객체지향 접근 방법
- 자주 변경되지 않는 안정적인 객체 구조를 바탕으로 시스템 기능을 객체 간의 책임으로 분배한다.
- 객체의 구조에 집중 & 기능이 객체의 구조를 따르게 만든다.
- 이것이 **객체를 기반으로 책임과 역할을 식별**하고, **메시지를 기반으로 객체들의 협력 관계**를 구축하는 이유

## 두 가지 재료 : 기능과 구조
- 사용자에게 제공할 '기능' & 기능을 담을 안정적인 '구조'를 준비하자
- 구조 (도메인 모델링)
  - 사용자나 이해관계자들이 **도메인**에 관해 생각하는 개념과 개념들 간의 관계로 표현
- 기능 (유스케이스 모델링)
  - 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현


## 안정적인 재료 : 구조
### 도메인 모델
- 도메인 : 사용자가 프로그램을 사용하는 대상 분야
- 도메인 모델 : 사용자가 프로그램을 사용하는 대상 영역에 관한 지식을 선택적이고 단순화하고 의식적으로 구조화한 형태
  - 도메인 내의 개념과 개념 간의 관계, 다양한 규칙이나 제약 등을 주의 깊게 추상화한 것

### 도메인의 모습을 담을 수 있는 객체지향
- 객체지향을 사용하면 사용자들이 이해하고 있는 도메인의 구조와 최대한 유사하게 코드 구조화 가능
- 사용자의 관점, 설계자의 관점, 코드의 관점 모두 수용 가능
  - 연결 완전성, 표현적 차이

### 표현적 차이
- SW 객체를 창조하기 위해서 은유해야 하는 대상은 도메인 모델
- 사용자가 도메인을 바라보는 관점을 그대로 코드에 반영
  - 표현적 차이는 줄어들 것이며, 사용자의 멘탈 모델이 그대로 코드에 녹아 스며들게 된다.

### 불안정한 기능을 담는 안정적인 도메인 모델
- 도메인 모델이 제공하는 구조는 상대적으로 안정적임
- 사용자가 도메인을 바라보는 관점을 반영해서 설계하고 구현
  - 사용자 모델에 포함된 개념과 규칙은 비교적 변경될 확률이 적기 때문에 변경에 쉽게 대처 가능
- 즉, 변경에 대해 안정적인 구조를 제공할 수 있음

## 불안정한 재료 : 기능
### 유스케이스
- 사용자의 목표를 달성하기 위해 사용자와 시스템 간에 이뤄지는 상호작용의 흐름을 텍스트로 정리한 것
- 시스템의 이해관계자들 간의 행위 중심으로 파악

1. 유스케이스는 사용자와 시스템 간의 상호작용을 보여주는 '텍스트'
2. 유스케이스는 하나의 시나리오가 아니라 여러 시나리오들의 집합
3. 단순한 피처 목록과 다르다
   - 의사소통할 수 있는 문맥, 시나리오
4. 사용자 인터페이스와 관련된 세부 정보를 포함하지 말아야 함
   - 인터페이스를 배제하고 사용자 관점에서 시스템의 행위에 초점을 맞춤
5. 내부 설계와 관련된 정보를 포함하지 않음

- 유스케이스는 객체의 구조나 책임에 대한 어떤 정보도 제공하지 않음.
- 단지 기능적 요구사항을 사용자의 목표라는 문맥을 중심으로 묶음

## 재료 합치기: 기능과 구조의 통합
### 도메인 모델, 유스케이스, 책임-주도 설계
- 불안정한 기능을 안정적인 구조에 담음으로써 변경에 대한 파급효과를 최소화하는 것은 훌륭한 객체지향 설계의 기본적인 요소
- 시스템이라는 큰 책임을 쪼개서, 더 작은 크기의 객체들의 협력을 통해 구현한다

### 기능 변경을 흡수하는 안정적인 구조
- 도메인 모델을 구성하는 개념은 비즈니스가 없어지거나 완전히 개편되지 않는 한 안정적으로 유지됨
- 도메인 모델을 중심으로 객체 구조를 설계하고 유스케이스의 기능을 객체의 책임으로 분배하는 유연함

- 객체지향의 가장 큰 장점은 도메인을 모델링하기 위한 기법과 도메인을 프로그래밍하기 위해 사용하는 기법이 동일하다는 점
  - 연결완전성 : 도메인 모델링에서 사용한 객체와 개념을 매끄럽게 코드 레벨의 객체와 클래스로 변환이 가능
  - 가역성 : 역방향 역시 성립, 코드의 변경으로부터 도메인 모델의 변경 사항을 유추 가능

> 안정적인 도메인 모델을 기반으로 시스템의 기능을 구현하자. 도메인 모델과 코드를 밀접하게 연관시키기 위해 노력하자.
