# 책임과 메시지

> 훌륭한 시스템을 만들기 위해선 모듈끼리 어떻게 커뮤니케이션하는지에 달려있다.
> **훌륭한 객체지향의 세계**는 **명확하게 정의된 역할과 책임**을 지닌 객체들이 상호 협력하는 세계이다!

## 자율적인 책임
### 설계의 품질을 좌우하는 책임
- 객체들은 어플리케이션의 기능을 구현하기 위해 협력하고, 협력 과정에서 각자 맡은 책임을 다 하기 위해서 **자율적**으로 판단하고 행동한다.
- 객체가 행동하는 유일한 이유는 다른 객체로부터 메시지를 수신받았기 때문. 이후 **스스로의 의지와 판단**으로 해당 책임을 수행

### 증언해라 vs 증언을 시간 순으로 말로 간결하게 표현해라
- 증언이란 책임만 지키되, 나머지 구체적인 방법이나 절차는 해당 객체에게 맡김으로써 자율성을 보장
- 상세한 수준의 책임은 증언이라는 협력은 만족시킬 수 있어도, 자율성을 보장하지 못함
> 자율성을 충분히 보장할 수 있을 정도로 포괄적이고 추상적인 책임

### '어떻게'가 아니라 '무엇'을
- 자율적인 책임의 특징은 '어떻게'가 아니라 '무엇'을 해야 하는지이다.

## 메시지와 메서드
### 메시지
- 다른 객체에게 접근할 수 있는 유일한 방법
- 수신자, 메시지 이름, 인자의 조합으로 구성
- 수신한 객체는 자신이 그 책임을 갖고 있다는 의미
  - **메시지의 모양이 객체가 수행할 책임의 모양을 결정**
- 객체의 외부에 해당

### 메서드
- 메시지를 처리하기 위해 내부적으로 선택하는 방법
- 객체가 자신의 책임을 다 하기 위해서 메시지를 처리할 방법인 메서드를 선택하게 된다.

### 다형성
- 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것을 의미
  - 서로 다른 타입의 객체가 동일한 메시지를 수신할 경우 서로 다른 메서드를 이용해 메시지를 처리할 수 있는 메커니즘
- 다형성은 역할, 책임, 협력과 깊은 관련이 있음
  - 서로 다른 객체들이 다형성을 만족시킨다는 것은?
    - **객체들이 동일한 책임을 공유한다는 것**
- 결국, 대체 가능성을 이용해 설계를 유연하고 재사용하게 만든다.
- 증언에 대해서 '증인' 역할을 수행할 수 있는 객체면 모두 가능
  - 그게 모자 장수인지, 요리사인지, 앨리스인지 알 필요가 없음
> 객체지향 패러다임이 강력한 이유는 다형성을 이용해 협력을 유연하게 만들 수 있기 때문! 객체가 어떻게할 것인지보다 무엇을 할 것인지에 집중하기에 시스템의 행위를 변경하기가 쉽다.

- 진정한 객체지향 패러다임은 **시스템을 정적인 클래스의 집합**이 아닌, **메시지를 주고 받는 동적인 객체들의 집합, 그들의 커뮤니케이션**에 초점을 맞출 때부터 시작된다.

- 각 객체가 독립적으로 어떤 상태와 행위가 있는지보다, 협력에 어떤 책임들이 있는지 파악하고 해당 책임을 어떤 객체들에게 분배할지 협력 관계를 설계하자.
  - 이 메시지들이 모여 객체의 인터페이스를 구성한다.

### 묻지말고 시켜라
- 메시지를 보낼 때, 수신하는 객체의 상태를 묻지 말아야 한다.
- 이것이 각 객체의 자율성을 보장하는 것이며, 캡술화를 보장하여 결합도를 낮게 유지시킨다.

## 객체 인터페이스
### 인터페이스
- 어떤 두 사물이 마주치는 경계 지점에서 서로 상호작용할 수 있게 이어주는 방법이나 장치

1. 인터페이스의 사용법을 익히기만 하면 내부 구조나 동작 방식을 몰라도 쉽게 대상을 조작할 수 있음
2. 인터페이스 자체는 변경하지 않고 내부 구성이나 작동 방식만을 변경하는 것은 사용자에게 어떤 영향도 미치지 않음
3. 대상이 변경되더라도 동일한 인터페이스를 제공하기만 하면 아무런 문제 없이 상호작용 가능

- 메시지가 인터페이스를 결정한다.

## 인터페이스와 구현의 분리
1. 좀 더 추상적인 인터페이스
   - 수신자의 자율성 보장
2. 최소 인터페이스
   - 외부에 최소한의 인터페이스만 노출
   - 가능한 적은 정보만을 노출 가능
     - 외부에 미치는 영향을 최소화시킬 수 있기 때문
3. 인터페이스와 구현 간에 차이가 있다는 점을 인식
   - 인터페이스와 구현은 결국 객체의 외부와 내부를 분리하는 것
   - 구현이 바깥에 노출되는 경우, 아무리 작은 부분을 수정하더라도 변경에 의한 파급효과는 해당 정보를 알고 있는 객체들 모두에게 퍼진다.
   - 협력에 참여하는 객체가 아는 정보는 공용 인터페이스까지만!
   - 내부 메서드 구현이나 상태는 데이터 은닉, 캡슐화한다


> 책임이 자율적일수록 적절히 **추상화**되며, **응집도**가 높아지고, **결합도**가 낮아지며, **캡슐화**가 증진되고, **인터페이스와 구현**이 명확히 분리되며, **설계의 유연성과 재사용성**이 향상된다.

- 응집도가 높다는 건 강하게 연관된 책임들로 구성되었다는 것
- 결합도가 낮아진다는 건 객체들 사이에 연관된 정보가 줄어든다는 것
  - 변경의 내용이 캡슐화되어 파급효과가 감소
