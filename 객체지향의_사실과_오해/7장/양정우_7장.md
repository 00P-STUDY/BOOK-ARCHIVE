# 함께 모으기

## 객체 지향 설계에 존재하는 세 가지 관점

1. 개념 관점
    1. 설계는 `도메인 안에 존재하는 개념`과 `개념들 사이의 관계`를 표현한다.
    2. 사용자가 바라보는 도메인의 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심.
2. 명세 관점
    1. 실제 소프트웨어 안에 있는 `객체들의 책임`에 초점을 맞춘다. 객체의 인터페이스.
    2. 객체가 협력을 위해 `‘무엇'`을 할 수 있는가에 초점. 
3. 구현 관점
    1. 객체들이 책임을 수행하는 데 필요한 코드를 작성하는 것.
    2. 객체의 책임을 `‘어떻게'` 수행할 것인가에 초점을 맞추어, 인터페이스 구현하는 데 필요한 `속성`과 `메서드`를 클래스에 추가한다.
- 동일한 클래스를 세 가지 관점에서 바라보아야 한다.
- `클래스가 은유하는 개념`은 도메인 관점, `클래스의 공용 인터페이스`는 명세 관점, `클래스의 속성과 메서드`는 구현 관점을 반영한다.

## 도메인 관점

- 동적인 객체를 `정적 타입으로 추상화`해서 복잡성을 낮추어야 한다.
- 타입은 분류를 위해 사용된다.
- 상태와 무관하게 `동일한 행동할 수 있는 객체`들은 `동일한 타입`으로 분류한다.

> ex. 손님 객체는 손님 타입 / 바리스타 객체는 바리스타 타입 / 아메리카노, 에스프레소 등은 커피 타입의 인스턴스 / 메뉴판 객체는 메뉴판 타입의 인스턴스
> 
- 타입 분류 후 → 타입 간 관계 살펴보기
    - 포함  관계(합성 관계): 한 타입의 인스턴스가 다른 타입의 인스턴스를 포함하는 관계
        - ex. 하나의 메뉴판 객체는 여러 메뉴 항목 객체로 구성됨.
    - 연관 관계: 한 객체가 다른 객체를 포함하지는 않지만 객체끼리 서로 알고 있어야 하는 경우
- 도메인 모델: 소프트웨어가 대상으로 하는 영역인 도메인을 단순화해서 표현한 모델

## 명세 관점

- 메시지 선택 → 수신할 적절한 객체 선택 → 선택된 객체에 책임 할당 → 공용 인터페이스로 책임 수행
- 메시지 처리할 객체를 찾기 위해 도메인 모델 안에 적절한 타입이 있는지 살펴봐야 한다.
- 적절한 타입을 발견했다면 책임을 수행할 객체를 그 타입의 인스턴스로 만들어야 한다.
- `객체가 수신한 메시지`가 `객체의 인터페이스`를 결정한다.
- 선택된 객체는 메시지를 자신의 인터페이스로 받아들인다.
- 구현은 동적인 객체가 아닌 정적인 타입을 이용해 이루어진다. 객체들을 포괄하는 타입을 정의한 후, 식별된 오퍼레이션을 타입의 인터페이스에 추가해야 한다.
- 객체 타입을 구현하는 일반적인 방법은 클래스를 이용하는 것.
- 인터페이스에 포함된 오퍼레이션은 외부에서 접근 가능해야 하므로 `public`으로 선언해야 한다.

## 구현 관점

- 최대한 빨리 코드를 구현해서 설계가 구현 가능한지를 판단해야 한다.
- `객체의 속성`은 객체 내부 구현에 속하기 때문에 `캡슐화`해야 한다.
- 인터페이스에는 객체 내부 속성에 대한 정보가 제공되면 안 된다.
- 객체에게 책임을 할당하고 인터페이스를 결정할 때는 객체 내부의 구현에 대한 어떤 가정도 하지 말아야 한다. 객체가 어떤 책임을 수행해야 하는지를 결정한 후에 책임을 수행하는 데 필요한 객체의 속성을 결정해야 한다.

## 코드의 세 가지 관점

### 코드는 세 가지 관점을 모두 제공해야 한다

- 개념 관점
    - 도메인 개념의 특성을 최대한 수용하면 변경 관리가 쉽고, 유지보수성을 향상시킬 수 있다.
    - 소프트웨어 클래스와 도메인 클래스 사이의 간격이 좁을수록 유지보수성 ↑
- 명세 관점
    - 클래스의 인터페이스
    - public 메서드는 다른 클래스가 협력할 수 있는 공용 인터페이스를 드러냄.
    - 공용 인터페이스는 외부 객체가 해당 객체에 접근할 수 있는 유일한 부분.
    - 인터페이스는 수정하면 해당 객체와 협력하는 모든 객체에 영향을 미침. 객체의 인터페이스는 수정하기 어렵다.
    - 안정적인 인터페이스를 만들기 위해서는 인터페이스에 구현과 관련된 세부 사항이 드러나면 안 된다.
- 구현 관점
    - 클래스의 내부 구현
    - 메서드와 속성은 구현. 공용 인터페이스의 일부 X → 메서드의 구현과 속성의 변경은 외부 객에체 영향을 미쳐서는 안 된다.
    - 메서드와 속성이 철저하게 클래스 내부로 캡슐화돼야 한다.

→ 하나의 클래스 안에 세 가지 관점을 모두 포함하면서도 각 관점에 대응되는 요소를 명확하고 깔끔하게 드러낼 수 있어야 한다.

### 도메인 개념을 참조하는 이유

- 도메인 개념 안에서 적절한 객체를 선택하는 것은 도메인에 대한 지식을 기반으로 코드의 구조와 의미를 쉽게 유추할 수 있게 한다. → 유지보수성 향상.
- 클래스로 기능 분할하고, 클래스 안에서 인터페이스와 구현을 분리하는 이유는 변경 발생 시 수월하게 대응할 수 있게 하기 위함.

### 인터페이스와 구현을 분리하라

- 명세 관점은 클래스의 안정적인 측면을 드러내야 한다.
- 구현 관점은 클래스의 불안정한 측면을 드러내야 한다.
- 인터페이스가 구현 세부 사항을 노출하게 되면 작은 변동에도 전체 협력이 영향을 받고, 취약한 설계가 됨.
- 명세 관점이 설계를 주도하게 하면 설계의 품질이 향상됨.

```
클래스를 명세 관점과 구현 관점으로 나누어 볼 수 있어야 한다.
캡슐화를 위반해서 구현을 인터페이스 밖으로 노출해서는 안 되고, 
인터페이스와 구현을 명확하게 분리하지 않고, 흐릿하게 섞어도 안 된다.
세 가지 관점 모두에서 클래스를 바라볼 수 있으려면 훌륭한 설계가 뒷받침돼야 한다.
```
